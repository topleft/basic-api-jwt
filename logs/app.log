{"message":"{\"error\":\"Please log in.\",\"stack\":\"Error: Please log in.\\n    at checkAuthentication (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:38:21)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at jsonParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/json.js:103:7)\",\"status\":401}","level":"error"}
{"message":"::1 - - [19/Jan/2019:23:08:20 +0000] \"GET /auth/current_user HTTP/1.1\" 401 53 \"-\" \"HTTPie/0.9.9\"\n","level":"info"}
{"message":"{\"error\":\"err.status is not a function\",\"stack\":\"TypeError: err.status is not a function\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:93:13)\\n    at new Promise (<anonymous>)\\n    at Object.validateUserAndPassword (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:90:12)\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:62:12)\\n    at new Promise (<anonymous>)\\n    at Object.createUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:61:12)\\n    at registerUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:106:10)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/read.js:129:5\\n    at invokeCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:262:16)\\n    at done (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:251:7)\\n    at IncomingMessage.onEnd (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:307:7)\\n    at IncomingMessage.emit (events.js:188:13)\\n    at endReadableNT (_stream_readable.js:1129:12)\\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)\"}","level":"error"}
{"message":"{\"error\":\"Cannot read property 'password' of undefined\",\"stack\":\"TypeError: Cannot read property 'password' of undefined\\n    at knex.where.first.then.user (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:124:41)\\n    at tryCatcher (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/util.js:16:23)\\n    at Promise._settlePromiseFromHandler (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:512:31)\\n    at Promise._settlePromise (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:569:18)\\n    at Promise._settlePromise0 (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:614:10)\\n    at Promise._settlePromises (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:694:18)\\n    at _drainQueueStep (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:138:12)\\n    at _drainQueue (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:131:9)\\n    at Async._drainQueues (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:147:5)\\n    at Immediate.Async.drainQueues [as _onImmediate] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:17:14)\\n    at processImmediate (timers.js:632:19)\"}","level":"error"}
{"error":{"name":"AssertionError","message":"expected 500 to equal 401","showDiff":true,"actual":500,"expected":401,"stack":"AssertionError: expected 500 to equal 401\n    at chai.request.post.send.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/routes/auth/login.js:26:35)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)"},"level":"error","message":"uncaughtException: expected 500 to equal 401\nAssertionError: expected 500 to equal 401\n    at chai.request.post.send.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/routes/auth/login.js:26:35)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","stack":"AssertionError: expected 500 to equal 401\n    at chai.request.post.send.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/routes/auth/login.js:26:35)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","exception":true,"date":"Sat Jan 19 2019 16:17:56 GMT-0700 (Mountain Standard Time)","process":{"pid":96798,"uid":502,"gid":20,"cwd":"/Users/pjeffryes/Documents/pete/basic-api-jwt","execPath":"/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","version":"v11.6.0","argv":["/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/mocha/bin/_mocha","test/**/*.js","./test/runner.test.js"],"memoryUsage":{"rss":117153792,"heapTotal":87363584,"heapUsed":49677928,"external":128527}},"os":{"loadavg":[2.1806640625,1.92724609375,1.79541015625],"uptime":544243},"trace":[{"column":35,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/test/routes/auth/login.js","function":"chai.request.post.send.end","line":26,"method":"end","native":false},{"column":3,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":"Test.Request.callback","line":631,"method":"callback","native":false},{"column":18,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":null,"line":795,"method":null,"native":false},{"column":7,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js","function":null,"line":16,"method":null,"native":false},{"column":15,"file":"events.js","function":"IncomingMessage.emit","line":193,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"endReadableNT","line":1129,"method":null,"native":false},{"column":19,"file":"internal/process/next_tick.js","function":"process.internalTickCallback","line":72,"method":"internalTickCallback","native":false}]}
{"message":"{\"error\":\"Please log in.\",\"stack\":\"Error: Please log in.\\n    at checkAuthentication (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:39:21)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at jsonParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/json.js:103:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at urlencodedParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/urlencoded.js:91:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at cors (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:188:7)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:224:17\\n    at originCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:214:15)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:219:13\\n    at optionsCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:199:9)\\n    at corsMiddleware (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:204:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at expressInit (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/init.js:33:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at query (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/query.js:49:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/application.js:173:10)\\n    at Server.app (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/express.js:38:9)\\n    at Server.emit (events.js:188:13)\\n    at parserOnIncoming (_http_server.js:676:12)\\n    at HTTPParser.parserOnHeadersComplete (_http_common.js:113:17)\",\"status\":401}","level":"error"}
{"error":{},"level":"error","message":"uncaughtException: Cannot read property 'should' of undefined\nTypeError: Cannot read property 'should' of undefined\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:45:28)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","stack":"TypeError: Cannot read property 'should' of undefined\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:45:28)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","exception":true,"date":"Sat Jan 19 2019 16:17:56 GMT-0700 (Mountain Standard Time)","process":{"pid":96798,"uid":502,"gid":20,"cwd":"/Users/pjeffryes/Documents/pete/basic-api-jwt","execPath":"/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","version":"v11.6.0","argv":["/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/mocha/bin/_mocha","test/**/*.js","./test/runner.test.js"],"memoryUsage":{"rss":117170176,"heapTotal":87363584,"heapUsed":51026336,"external":154172}},"os":{"loadavg":[2.1806640625,1.92724609375,1.79541015625],"uptime":544243},"trace":[{"column":28,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js","function":"chai.request.get.end","line":45,"method":"end","native":false},{"column":3,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":"Test.Request.callback","line":631,"method":"callback","native":false},{"column":18,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":null,"line":795,"method":null,"native":false},{"column":7,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js","function":null,"line":16,"method":null,"native":false},{"column":15,"file":"events.js","function":"IncomingMessage.emit","line":193,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"endReadableNT","line":1129,"method":null,"native":false},{"column":19,"file":"internal/process/next_tick.js","function":"process.internalTickCallback","line":72,"method":"internalTickCallback","native":false}]}
{"message":"{\"error\":\"err.status is not a function\",\"stack\":\"TypeError: err.status is not a function\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:92:13)\\n    at new Promise (<anonymous>)\\n    at Object.validateUserAndPassword (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:89:12)\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:61:12)\\n    at new Promise (<anonymous>)\\n    at Object.createUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:60:12)\\n    at registerUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:105:10)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/read.js:129:5\\n    at invokeCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:262:16)\\n    at done (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:251:7)\\n    at IncomingMessage.onEnd (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:307:7)\\n    at IncomingMessage.emit (events.js:188:13)\\n    at endReadableNT (_stream_readable.js:1129:12)\\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)\"}","level":"error"}
{"message":"{\"error\":\"Cannot read property 'password' of undefined\",\"stack\":\"TypeError: Cannot read property 'password' of undefined\\n    at knex.where.first.then.user (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:123:41)\\n    at tryCatcher (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/util.js:16:23)\\n    at Promise._settlePromiseFromHandler (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:512:31)\\n    at Promise._settlePromise (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:569:18)\\n    at Promise._settlePromise0 (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:614:10)\\n    at Promise._settlePromises (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:694:18)\\n    at _drainQueueStep (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:138:12)\\n    at _drainQueue (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:131:9)\\n    at Async._drainQueues (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:147:5)\\n    at Immediate.Async.drainQueues [as _onImmediate] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:17:14)\\n    at processImmediate (timers.js:632:19)\",\"status\":401}","level":"error"}
{"error":{"name":"AssertionError","message":"expected undefined to equal 'Login failed.'","showDiff":true,"expected":"Login failed.","stack":"AssertionError: expected undefined to equal 'Login failed.'\n    at chai.request.post.send.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/routes/auth/login.js:28:41)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)"},"level":"error","message":"uncaughtException: expected undefined to equal 'Login failed.'\nAssertionError: expected undefined to equal 'Login failed.'\n    at chai.request.post.send.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/routes/auth/login.js:28:41)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","stack":"AssertionError: expected undefined to equal 'Login failed.'\n    at chai.request.post.send.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/routes/auth/login.js:28:41)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","exception":true,"date":"Sat Jan 19 2019 16:44:03 GMT-0700 (Mountain Standard Time)","process":{"pid":96950,"uid":502,"gid":20,"cwd":"/Users/pjeffryes/Documents/pete/basic-api-jwt","execPath":"/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","version":"v11.6.0","argv":["/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/mocha/bin/_mocha","test/**/*.js","./test/runner.test.js"],"memoryUsage":{"rss":118521856,"heapTotal":85266432,"heapUsed":39490896,"external":129160}},"os":{"loadavg":[2.4228515625,2.09228515625,1.8857421875],"uptime":545811},"trace":[{"column":41,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/test/routes/auth/login.js","function":"chai.request.post.send.end","line":28,"method":"end","native":false},{"column":3,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":"Test.Request.callback","line":631,"method":"callback","native":false},{"column":18,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":null,"line":795,"method":null,"native":false},{"column":7,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js","function":null,"line":16,"method":null,"native":false},{"column":15,"file":"events.js","function":"IncomingMessage.emit","line":193,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"endReadableNT","line":1129,"method":null,"native":false},{"column":19,"file":"internal/process/next_tick.js","function":"process.internalTickCallback","line":72,"method":"internalTickCallback","native":false}]}
{"message":"{\"error\":\"Please log in.\",\"stack\":\"Error: Please log in.\\n    at checkAuthentication (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:38:21)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at jsonParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/json.js:103:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at urlencodedParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/urlencoded.js:91:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at cors (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:188:7)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:224:17\\n    at originCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:214:15)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:219:13\\n    at optionsCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:199:9)\\n    at corsMiddleware (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:204:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at expressInit (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/init.js:33:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at query (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/query.js:49:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/application.js:173:10)\\n    at Server.app (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/express.js:38:9)\\n    at Server.emit (events.js:188:13)\\n    at parserOnIncoming (_http_server.js:676:12)\\n    at HTTPParser.parserOnHeadersComplete (_http_common.js:113:17)\",\"status\":401}","level":"error"}
{"error":{},"level":"error","message":"uncaughtException: Cannot read property 'should' of undefined\nTypeError: Cannot read property 'should' of undefined\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:45:28)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","stack":"TypeError: Cannot read property 'should' of undefined\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:45:28)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","exception":true,"date":"Sat Jan 19 2019 16:44:03 GMT-0700 (Mountain Standard Time)","process":{"pid":96950,"uid":502,"gid":20,"cwd":"/Users/pjeffryes/Documents/pete/basic-api-jwt","execPath":"/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","version":"v11.6.0","argv":["/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/mocha/bin/_mocha","test/**/*.js","./test/runner.test.js"],"memoryUsage":{"rss":118534144,"heapTotal":85266432,"heapUsed":40839336,"external":158905}},"os":{"loadavg":[2.4228515625,2.09228515625,1.8857421875],"uptime":545811},"trace":[{"column":28,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js","function":"chai.request.get.end","line":45,"method":"end","native":false},{"column":3,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":"Test.Request.callback","line":631,"method":"callback","native":false},{"column":18,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":null,"line":795,"method":null,"native":false},{"column":7,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js","function":null,"line":16,"method":null,"native":false},{"column":15,"file":"events.js","function":"IncomingMessage.emit","line":193,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"endReadableNT","line":1129,"method":null,"native":false},{"column":19,"file":"internal/process/next_tick.js","function":"process.internalTickCallback","line":72,"method":"internalTickCallback","native":false}]}
{"message":"{\"error\":\"err.status is not a function\",\"stack\":\"TypeError: err.status is not a function\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:92:13)\\n    at new Promise (<anonymous>)\\n    at Object.validateUserAndPassword (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:89:12)\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:61:12)\\n    at new Promise (<anonymous>)\\n    at Object.createUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:60:12)\\n    at registerUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:105:10)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/read.js:129:5\\n    at invokeCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:262:16)\\n    at done (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:251:7)\\n    at IncomingMessage.onEnd (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:307:7)\\n    at IncomingMessage.emit (events.js:188:13)\\n    at endReadableNT (_stream_readable.js:1129:12)\\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)\"}","level":"error"}
{"message":"{\"error\":\"Login failed.\",\"stack\":\"TypeError: Cannot read property 'password' of undefined\\n    at knex.where.first.then.user (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:123:41)\\n    at tryCatcher (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/util.js:16:23)\\n    at Promise._settlePromiseFromHandler (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:512:31)\\n    at Promise._settlePromise (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:569:18)\\n    at Promise._settlePromise0 (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:614:10)\\n    at Promise._settlePromises (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:694:18)\\n    at _drainQueueStep (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:138:12)\\n    at _drainQueue (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:131:9)\\n    at Async._drainQueues (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:147:5)\\n    at Immediate.Async.drainQueues [as _onImmediate] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:17:14)\\n    at processImmediate (timers.js:632:19)\",\"status\":401}","level":"error"}
{"error":{"name":"AssertionError","message":"expected undefined to equal 'Login failed.'","showDiff":true,"expected":"Login failed.","stack":"AssertionError: expected undefined to equal 'Login failed.'\n    at chai.request.post.send.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/routes/auth/login.js:28:41)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)"},"level":"error","message":"uncaughtException: expected undefined to equal 'Login failed.'\nAssertionError: expected undefined to equal 'Login failed.'\n    at chai.request.post.send.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/routes/auth/login.js:28:41)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","stack":"AssertionError: expected undefined to equal 'Login failed.'\n    at chai.request.post.send.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/routes/auth/login.js:28:41)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","exception":true,"date":"Sat Jan 19 2019 16:45:06 GMT-0700 (Mountain Standard Time)","process":{"pid":97022,"uid":502,"gid":20,"cwd":"/Users/pjeffryes/Documents/pete/basic-api-jwt","execPath":"/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","version":"v11.6.0","argv":["/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/mocha/bin/_mocha","test/**/*.js","./test/runner.test.js"],"memoryUsage":{"rss":116981760,"heapTotal":85266432,"heapUsed":39359936,"external":129129}},"os":{"loadavg":[1.85546875,1.982421875,1.85693359375],"uptime":545874},"trace":[{"column":41,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/test/routes/auth/login.js","function":"chai.request.post.send.end","line":28,"method":"end","native":false},{"column":3,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":"Test.Request.callback","line":631,"method":"callback","native":false},{"column":18,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":null,"line":795,"method":null,"native":false},{"column":7,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js","function":null,"line":16,"method":null,"native":false},{"column":15,"file":"events.js","function":"IncomingMessage.emit","line":193,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"endReadableNT","line":1129,"method":null,"native":false},{"column":19,"file":"internal/process/next_tick.js","function":"process.internalTickCallback","line":72,"method":"internalTickCallback","native":false}]}
{"message":"{\"error\":\"Please log in.\",\"stack\":\"Error: Please log in.\\n    at checkAuthentication (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:38:21)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at jsonParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/json.js:103:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at urlencodedParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/urlencoded.js:91:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at cors (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:188:7)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:224:17\\n    at originCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:214:15)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:219:13\\n    at optionsCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:199:9)\\n    at corsMiddleware (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:204:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at expressInit (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/init.js:33:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at query (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/query.js:49:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/application.js:173:10)\\n    at Server.app (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/express.js:38:9)\\n    at Server.emit (events.js:188:13)\\n    at parserOnIncoming (_http_server.js:676:12)\\n    at HTTPParser.parserOnHeadersComplete (_http_common.js:113:17)\",\"status\":401}","level":"error"}
{"error":{},"level":"error","message":"uncaughtException: Cannot read property 'should' of undefined\nTypeError: Cannot read property 'should' of undefined\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:45:28)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","stack":"TypeError: Cannot read property 'should' of undefined\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:45:28)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","exception":true,"date":"Sat Jan 19 2019 16:45:06 GMT-0700 (Mountain Standard Time)","process":{"pid":97022,"uid":502,"gid":20,"cwd":"/Users/pjeffryes/Documents/pete/basic-api-jwt","execPath":"/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","version":"v11.6.0","argv":["/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/mocha/bin/_mocha","test/**/*.js","./test/runner.test.js"],"memoryUsage":{"rss":116998144,"heapTotal":85266432,"heapUsed":40703376,"external":158871}},"os":{"loadavg":[1.85546875,1.982421875,1.85693359375],"uptime":545874},"trace":[{"column":28,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js","function":"chai.request.get.end","line":45,"method":"end","native":false},{"column":3,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":"Test.Request.callback","line":631,"method":"callback","native":false},{"column":18,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":null,"line":795,"method":null,"native":false},{"column":7,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js","function":null,"line":16,"method":null,"native":false},{"column":15,"file":"events.js","function":"IncomingMessage.emit","line":193,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"endReadableNT","line":1129,"method":null,"native":false},{"column":19,"file":"internal/process/next_tick.js","function":"process.internalTickCallback","line":72,"method":"internalTickCallback","native":false}]}
{"message":"{\"error\":\"err.status is not a function\",\"stack\":\"TypeError: err.status is not a function\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:92:13)\\n    at new Promise (<anonymous>)\\n    at Object.validateUserAndPassword (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:89:12)\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:61:12)\\n    at new Promise (<anonymous>)\\n    at Object.createUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:60:12)\\n    at registerUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:105:10)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/read.js:129:5\\n    at invokeCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:262:16)\\n    at done (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:251:7)\\n    at IncomingMessage.onEnd (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:307:7)\\n    at IncomingMessage.emit (events.js:188:13)\\n    at endReadableNT (_stream_readable.js:1129:12)\\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)\"}","level":"error"}
{"message":"{\"error\":\"Login failed.\",\"stack\":\"TypeError: Cannot read property 'password' of undefined\\n    at knex.where.first.then.user (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:123:41)\\n    at tryCatcher (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/util.js:16:23)\\n    at Promise._settlePromiseFromHandler (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:512:31)\\n    at Promise._settlePromise (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:569:18)\\n    at Promise._settlePromise0 (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:614:10)\\n    at Promise._settlePromises (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:694:18)\\n    at _drainQueueStep (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:138:12)\\n    at _drainQueue (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:131:9)\\n    at Async._drainQueues (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:147:5)\\n    at Immediate.Async.drainQueues [as _onImmediate] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:17:14)\\n    at processImmediate (timers.js:632:19)\",\"status\":401}","level":"error"}
{"error":{"name":"AssertionError","message":"expected 'cannot POST /auth/login (401)' to equal 'Login failed.'","showDiff":true,"actual":"cannot POST /auth/login (401)","expected":"Login failed.","stack":"AssertionError: expected 'cannot POST /auth/login (401)' to equal 'Login failed.'\n    at chai.request.post.send.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/routes/auth/login.js:28:42)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)"},"level":"error","message":"uncaughtException: expected 'cannot POST /auth/login (401)' to equal 'Login failed.'\nAssertionError: expected 'cannot POST /auth/login (401)' to equal 'Login failed.'\n    at chai.request.post.send.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/routes/auth/login.js:28:42)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","stack":"AssertionError: expected 'cannot POST /auth/login (401)' to equal 'Login failed.'\n    at chai.request.post.send.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/routes/auth/login.js:28:42)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","exception":true,"date":"Sat Jan 19 2019 16:45:52 GMT-0700 (Mountain Standard Time)","process":{"pid":97102,"uid":502,"gid":20,"cwd":"/Users/pjeffryes/Documents/pete/basic-api-jwt","execPath":"/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","version":"v11.6.0","argv":["/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/mocha/bin/_mocha","test/**/*.js","./test/runner.test.js"],"memoryUsage":{"rss":117055488,"heapTotal":85266432,"heapUsed":39356232,"external":129129}},"os":{"loadavg":[1.7421875,1.92333984375,1.83837890625],"uptime":545920},"trace":[{"column":42,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/test/routes/auth/login.js","function":"chai.request.post.send.end","line":28,"method":"end","native":false},{"column":3,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":"Test.Request.callback","line":631,"method":"callback","native":false},{"column":18,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":null,"line":795,"method":null,"native":false},{"column":7,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js","function":null,"line":16,"method":null,"native":false},{"column":15,"file":"events.js","function":"IncomingMessage.emit","line":193,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"endReadableNT","line":1129,"method":null,"native":false},{"column":19,"file":"internal/process/next_tick.js","function":"process.internalTickCallback","line":72,"method":"internalTickCallback","native":false}]}
{"message":"{\"error\":\"Please log in.\",\"stack\":\"Error: Please log in.\\n    at checkAuthentication (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:38:21)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at jsonParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/json.js:103:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at urlencodedParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/urlencoded.js:91:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at cors (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:188:7)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:224:17\\n    at originCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:214:15)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:219:13\\n    at optionsCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:199:9)\\n    at corsMiddleware (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:204:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at expressInit (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/init.js:33:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at query (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/query.js:49:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/application.js:173:10)\\n    at Server.app (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/express.js:38:9)\\n    at Server.emit (events.js:188:13)\\n    at parserOnIncoming (_http_server.js:676:12)\\n    at HTTPParser.parserOnHeadersComplete (_http_common.js:113:17)\",\"status\":401}","level":"error"}
{"error":{},"level":"error","message":"uncaughtException: Cannot read property 'should' of undefined\nTypeError: Cannot read property 'should' of undefined\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:45:28)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","stack":"TypeError: Cannot read property 'should' of undefined\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:45:28)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","exception":true,"date":"Sat Jan 19 2019 16:45:52 GMT-0700 (Mountain Standard Time)","process":{"pid":97102,"uid":502,"gid":20,"cwd":"/Users/pjeffryes/Documents/pete/basic-api-jwt","execPath":"/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","version":"v11.6.0","argv":["/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/mocha/bin/_mocha","test/**/*.js","./test/runner.test.js"],"memoryUsage":{"rss":117071872,"heapTotal":85266432,"heapUsed":40707136,"external":159023}},"os":{"loadavg":[1.7421875,1.92333984375,1.83837890625],"uptime":545920},"trace":[{"column":28,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js","function":"chai.request.get.end","line":45,"method":"end","native":false},{"column":3,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":"Test.Request.callback","line":631,"method":"callback","native":false},{"column":18,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":null,"line":795,"method":null,"native":false},{"column":7,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js","function":null,"line":16,"method":null,"native":false},{"column":15,"file":"events.js","function":"IncomingMessage.emit","line":193,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"endReadableNT","line":1129,"method":null,"native":false},{"column":19,"file":"internal/process/next_tick.js","function":"process.internalTickCallback","line":72,"method":"internalTickCallback","native":false}]}
{"message":"{\"error\":\"err.status is not a function\",\"stack\":\"TypeError: err.status is not a function\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:92:13)\\n    at new Promise (<anonymous>)\\n    at Object.validateUserAndPassword (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:89:12)\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:61:12)\\n    at new Promise (<anonymous>)\\n    at Object.createUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:60:12)\\n    at registerUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:105:10)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/read.js:129:5\\n    at invokeCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:262:16)\\n    at done (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:251:7)\\n    at IncomingMessage.onEnd (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:307:7)\\n    at IncomingMessage.emit (events.js:188:13)\\n    at endReadableNT (_stream_readable.js:1129:12)\\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)\"}","level":"error"}
{"message":"{\"error\":\"Login failed.\",\"stack\":\"TypeError: Cannot read property 'password' of undefined\\n    at knex.where.first.then.user (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:123:41)\\n    at tryCatcher (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/util.js:16:23)\\n    at Promise._settlePromiseFromHandler (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:512:31)\\n    at Promise._settlePromise (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:569:18)\\n    at Promise._settlePromise0 (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:614:10)\\n    at Promise._settlePromises (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:694:18)\\n    at _drainQueueStep (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:138:12)\\n    at _drainQueue (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:131:9)\\n    at Async._drainQueues (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:147:5)\\n    at Immediate.Async.drainQueues [as _onImmediate] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:17:14)\\n    at processImmediate (timers.js:632:19)\",\"status\":401}","level":"error"}
{"error":{"name":"AssertionError","message":"expected 'cannot POST /auth/login (401)' to equal 'Login failed.'","showDiff":true,"actual":"cannot POST /auth/login (401)","expected":"Login failed.","stack":"AssertionError: expected 'cannot POST /auth/login (401)' to equal 'Login failed.'\n    at chai.request.post.send.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/routes/auth/login.js:28:42)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)"},"level":"error","message":"uncaughtException: expected 'cannot POST /auth/login (401)' to equal 'Login failed.'\nAssertionError: expected 'cannot POST /auth/login (401)' to equal 'Login failed.'\n    at chai.request.post.send.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/routes/auth/login.js:28:42)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","stack":"AssertionError: expected 'cannot POST /auth/login (401)' to equal 'Login failed.'\n    at chai.request.post.send.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/routes/auth/login.js:28:42)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","exception":true,"date":"Sat Jan 19 2019 16:46:42 GMT-0700 (Mountain Standard Time)","process":{"pid":97188,"uid":502,"gid":20,"cwd":"/Users/pjeffryes/Documents/pete/basic-api-jwt","execPath":"/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","version":"v11.6.0","argv":["/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/mocha/bin/_mocha","test/**/*.js","./test/runner.test.js"],"memoryUsage":{"rss":117792768,"heapTotal":85790720,"heapUsed":39683704,"external":129129}},"os":{"loadavg":[1.626953125,1.869140625,1.8212890625],"uptime":545970},"trace":[{"column":42,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/test/routes/auth/login.js","function":"chai.request.post.send.end","line":28,"method":"end","native":false},{"column":3,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":"Test.Request.callback","line":631,"method":"callback","native":false},{"column":18,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":null,"line":795,"method":null,"native":false},{"column":7,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js","function":null,"line":16,"method":null,"native":false},{"column":15,"file":"events.js","function":"IncomingMessage.emit","line":193,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"endReadableNT","line":1129,"method":null,"native":false},{"column":19,"file":"internal/process/next_tick.js","function":"process.internalTickCallback","line":72,"method":"internalTickCallback","native":false}]}
{"message":"{\"error\":\"Please log in.\",\"stack\":\"Error: Please log in.\\n    at checkAuthentication (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:38:21)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at jsonParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/json.js:103:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at urlencodedParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/urlencoded.js:91:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at cors (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:188:7)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:224:17\\n    at originCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:214:15)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:219:13\\n    at optionsCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:199:9)\\n    at corsMiddleware (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:204:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at expressInit (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/init.js:33:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at query (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/query.js:49:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/application.js:173:10)\\n    at Server.app (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/express.js:38:9)\\n    at Server.emit (events.js:188:13)\\n    at parserOnIncoming (_http_server.js:676:12)\\n    at HTTPParser.parserOnHeadersComplete (_http_common.js:113:17)\",\"status\":401}","level":"error"}
{"error":{},"level":"error","message":"uncaughtException: Cannot read property 'should' of undefined\nTypeError: Cannot read property 'should' of undefined\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:45:28)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","stack":"TypeError: Cannot read property 'should' of undefined\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:45:28)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","exception":true,"date":"Sat Jan 19 2019 16:46:42 GMT-0700 (Mountain Standard Time)","process":{"pid":97188,"uid":502,"gid":20,"cwd":"/Users/pjeffryes/Documents/pete/basic-api-jwt","execPath":"/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","version":"v11.6.0","argv":["/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/mocha/bin/_mocha","test/**/*.js","./test/runner.test.js"],"memoryUsage":{"rss":117805056,"heapTotal":85790720,"heapUsed":41029528,"external":159022}},"os":{"loadavg":[1.626953125,1.869140625,1.8212890625],"uptime":545970},"trace":[{"column":28,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js","function":"chai.request.get.end","line":45,"method":"end","native":false},{"column":3,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":"Test.Request.callback","line":631,"method":"callback","native":false},{"column":18,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":null,"line":795,"method":null,"native":false},{"column":7,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js","function":null,"line":16,"method":null,"native":false},{"column":15,"file":"events.js","function":"IncomingMessage.emit","line":193,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"endReadableNT","line":1129,"method":null,"native":false},{"column":19,"file":"internal/process/next_tick.js","function":"process.internalTickCallback","line":72,"method":"internalTickCallback","native":false}]}
{"message":"{\"error\":\"err.status is not a function\",\"stack\":\"TypeError: err.status is not a function\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:92:13)\\n    at new Promise (<anonymous>)\\n    at Object.validateUserAndPassword (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:89:12)\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:61:12)\\n    at new Promise (<anonymous>)\\n    at Object.createUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:60:12)\\n    at registerUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:105:10)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/read.js:129:5\\n    at invokeCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:262:16)\\n    at done (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:251:7)\\n    at IncomingMessage.onEnd (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:307:7)\\n    at IncomingMessage.emit (events.js:188:13)\\n    at endReadableNT (_stream_readable.js:1129:12)\\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)\"}","level":"error"}
{"message":"{\"error\":\"Login failed.\",\"stack\":\"TypeError: Cannot read property 'password' of undefined\\n    at knex.where.first.then.user (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:123:41)\\n    at tryCatcher (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/util.js:16:23)\\n    at Promise._settlePromiseFromHandler (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:512:31)\\n    at Promise._settlePromise (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:569:18)\\n    at Promise._settlePromise0 (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:614:10)\\n    at Promise._settlePromises (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:694:18)\\n    at _drainQueueStep (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:138:12)\\n    at _drainQueue (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:131:9)\\n    at Async._drainQueues (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:147:5)\\n    at Immediate.Async.drainQueues [as _onImmediate] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:17:14)\\n    at processImmediate (timers.js:632:19)\",\"status\":401}","level":"error"}
{"message":"{\"error\":\"Please log in.\",\"stack\":\"Error: Please log in.\\n    at checkAuthentication (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:38:21)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at jsonParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/json.js:103:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at urlencodedParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/urlencoded.js:91:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at cors (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:188:7)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:224:17\\n    at originCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:214:15)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:219:13\\n    at optionsCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:199:9)\\n    at corsMiddleware (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:204:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at expressInit (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/init.js:33:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at query (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/query.js:49:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/application.js:173:10)\\n    at Server.app (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/express.js:38:9)\\n    at Server.emit (events.js:188:13)\\n    at parserOnIncoming (_http_server.js:676:12)\\n    at HTTPParser.parserOnHeadersComplete (_http_common.js:113:17)\",\"status\":401}","level":"error"}
{"error":{},"level":"error","message":"uncaughtException: Cannot read property 'should' of undefined\nTypeError: Cannot read property 'should' of undefined\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:45:28)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","stack":"TypeError: Cannot read property 'should' of undefined\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:45:28)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","exception":true,"date":"Sat Jan 19 2019 16:47:27 GMT-0700 (Mountain Standard Time)","process":{"pid":97258,"uid":502,"gid":20,"cwd":"/Users/pjeffryes/Documents/pete/basic-api-jwt","execPath":"/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","version":"v11.6.0","argv":["/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/mocha/bin/_mocha","test/**/*.js","./test/runner.test.js"],"memoryUsage":{"rss":116424704,"heapTotal":85790720,"heapUsed":40916160,"external":154774}},"os":{"loadavg":[1.5302734375,1.8076171875,1.80078125],"uptime":546015},"trace":[{"column":28,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js","function":"chai.request.get.end","line":45,"method":"end","native":false},{"column":3,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":"Test.Request.callback","line":631,"method":"callback","native":false},{"column":18,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":null,"line":795,"method":null,"native":false},{"column":7,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js","function":null,"line":16,"method":null,"native":false},{"column":15,"file":"events.js","function":"IncomingMessage.emit","line":193,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"endReadableNT","line":1129,"method":null,"native":false},{"column":19,"file":"internal/process/next_tick.js","function":"process.internalTickCallback","line":72,"method":"internalTickCallback","native":false}]}
{"message":"{\"error\":\"err.status is not a function\",\"stack\":\"TypeError: err.status is not a function\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:92:13)\\n    at new Promise (<anonymous>)\\n    at Object.validateUserAndPassword (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:89:12)\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:61:12)\\n    at new Promise (<anonymous>)\\n    at Object.createUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:60:12)\\n    at registerUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:105:10)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/read.js:129:5\\n    at invokeCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:262:16)\\n    at done (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:251:7)\\n    at IncomingMessage.onEnd (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:307:7)\\n    at IncomingMessage.emit (events.js:188:13)\\n    at endReadableNT (_stream_readable.js:1129:12)\\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)\"}","level":"error"}
{"message":"{\"error\":\"Login failed.\",\"stack\":\"TypeError: Cannot read property 'password' of undefined\\n    at knex.where.first.then.user (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:123:41)\\n    at tryCatcher (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/util.js:16:23)\\n    at Promise._settlePromiseFromHandler (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:512:31)\\n    at Promise._settlePromise (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:569:18)\\n    at Promise._settlePromise0 (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:614:10)\\n    at Promise._settlePromises (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:694:18)\\n    at _drainQueueStep (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:138:12)\\n    at _drainQueue (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:131:9)\\n    at Async._drainQueues (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:147:5)\\n    at Immediate.Async.drainQueues [as _onImmediate] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:17:14)\\n    at processImmediate (timers.js:632:19)\",\"status\":401}","level":"error"}
{"message":"{\"error\":\"Please log in.\",\"stack\":\"Error: Please log in.\\n    at checkAuthentication (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:38:21)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at jsonParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/json.js:103:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at urlencodedParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/urlencoded.js:91:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at cors (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:188:7)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:224:17\\n    at originCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:214:15)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:219:13\\n    at optionsCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:199:9)\\n    at corsMiddleware (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:204:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at expressInit (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/init.js:33:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at query (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/query.js:49:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/application.js:173:10)\\n    at Server.app (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/express.js:38:9)\\n    at Server.emit (events.js:188:13)\\n    at parserOnIncoming (_http_server.js:676:12)\\n    at HTTPParser.parserOnHeadersComplete (_http_common.js:113:17)\",\"status\":401}","level":"error"}
{"error":{},"level":"error","message":"uncaughtException: obj.indexOf is not a function\nTypeError: obj.indexOf is not a function\n    at ctx.(anonymous function).include (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/core/assertions.js:228:45)\n    at doAsserterAsyncAndAddThen (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js:293:29)\n    at ctx.(anonymous function).<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js:271:25)\n    at ctx.(anonymous function).chainableBehavior.method (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/overwriteChainableMethod.js:51:34)\n    at ctx.(anonymous function).assert (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/addChainableMethod.js:84:49)\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:44:33)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","stack":"TypeError: obj.indexOf is not a function\n    at ctx.(anonymous function).include (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/core/assertions.js:228:45)\n    at doAsserterAsyncAndAddThen (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js:293:29)\n    at ctx.(anonymous function).<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js:271:25)\n    at ctx.(anonymous function).chainableBehavior.method (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/overwriteChainableMethod.js:51:34)\n    at ctx.(anonymous function).assert (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/addChainableMethod.js:84:49)\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:44:33)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","exception":true,"date":"Sat Jan 19 2019 16:47:54 GMT-0700 (Mountain Standard Time)","process":{"pid":97335,"uid":502,"gid":20,"cwd":"/Users/pjeffryes/Documents/pete/basic-api-jwt","execPath":"/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","version":"v11.6.0","argv":["/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/mocha/bin/_mocha","test/**/*.js","./test/runner.test.js"],"memoryUsage":{"rss":116228096,"heapTotal":85266432,"heapUsed":40765176,"external":154774}},"os":{"loadavg":[1.8515625,1.8564453125,1.818359375],"uptime":546042},"trace":[{"column":45,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/core/assertions.js","function":"ctx.(anonymous function).include","line":228,"method":"include","native":false},{"column":29,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js","function":"doAsserterAsyncAndAddThen","line":293,"method":null,"native":false},{"column":25,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js","function":null,"line":271,"method":null,"native":false},{"column":34,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/overwriteChainableMethod.js","function":"ctx.(anonymous function).chainableBehavior.method","line":51,"method":"method","native":false},{"column":49,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/addChainableMethod.js","function":"ctx.(anonymous function).assert","line":84,"method":"assert","native":false},{"column":33,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js","function":"chai.request.get.end","line":44,"method":"end","native":false},{"column":3,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":"Test.Request.callback","line":631,"method":"callback","native":false},{"column":18,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":null,"line":795,"method":null,"native":false},{"column":7,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js","function":null,"line":16,"method":null,"native":false},{"column":15,"file":"events.js","function":"IncomingMessage.emit","line":193,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"endReadableNT","line":1129,"method":null,"native":false},{"column":19,"file":"internal/process/next_tick.js","function":"process.internalTickCallback","line":72,"method":"internalTickCallback","native":false}]}
{"message":"{\"error\":\"err.status is not a function\",\"stack\":\"TypeError: err.status is not a function\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:92:13)\\n    at new Promise (<anonymous>)\\n    at Object.validateUserAndPassword (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:89:12)\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:61:12)\\n    at new Promise (<anonymous>)\\n    at Object.createUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:60:12)\\n    at registerUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:105:10)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/read.js:129:5\\n    at invokeCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:262:16)\\n    at done (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:251:7)\\n    at IncomingMessage.onEnd (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:307:7)\\n    at IncomingMessage.emit (events.js:188:13)\\n    at endReadableNT (_stream_readable.js:1129:12)\\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)\"}","level":"error"}
{"message":"{\"error\":\"Login failed.\",\"stack\":\"TypeError: Cannot read property 'password' of undefined\\n    at knex.where.first.then.user (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:123:41)\\n    at tryCatcher (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/util.js:16:23)\\n    at Promise._settlePromiseFromHandler (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:512:31)\\n    at Promise._settlePromise (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:569:18)\\n    at Promise._settlePromise0 (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:614:10)\\n    at Promise._settlePromises (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:694:18)\\n    at _drainQueueStep (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:138:12)\\n    at _drainQueue (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:131:9)\\n    at Async._drainQueues (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:147:5)\\n    at Immediate.Async.drainQueues [as _onImmediate] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:17:14)\\n    at processImmediate (timers.js:632:19)\",\"status\":401}","level":"error"}
{"message":"{\"error\":\"Please log in.\",\"stack\":\"Error: Please log in.\\n    at checkAuthentication (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:38:21)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at jsonParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/json.js:103:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at urlencodedParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/urlencoded.js:91:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at cors (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:188:7)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:224:17\\n    at originCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:214:15)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:219:13\\n    at optionsCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:199:9)\\n    at corsMiddleware (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:204:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at expressInit (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/init.js:33:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at query (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/query.js:49:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/application.js:173:10)\\n    at Server.app (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/express.js:38:9)\\n    at Server.emit (events.js:188:13)\\n    at parserOnIncoming (_http_server.js:676:12)\\n    at HTTPParser.parserOnHeadersComplete (_http_common.js:113:17)\",\"status\":401}","level":"error"}
{"error":{},"level":"error","message":"uncaughtException: obj.indexOf is not a function\nTypeError: obj.indexOf is not a function\n    at ctx.(anonymous function).include (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/core/assertions.js:228:45)\n    at doAsserterAsyncAndAddThen (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js:293:29)\n    at ctx.(anonymous function).<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js:271:25)\n    at ctx.(anonymous function).chainableBehavior.method (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/overwriteChainableMethod.js:51:34)\n    at ctx.(anonymous function).assert (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/addChainableMethod.js:84:49)\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:44:33)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","stack":"TypeError: obj.indexOf is not a function\n    at ctx.(anonymous function).include (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/core/assertions.js:228:45)\n    at doAsserterAsyncAndAddThen (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js:293:29)\n    at ctx.(anonymous function).<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js:271:25)\n    at ctx.(anonymous function).chainableBehavior.method (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/overwriteChainableMethod.js:51:34)\n    at ctx.(anonymous function).assert (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/addChainableMethod.js:84:49)\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:44:33)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","exception":true,"date":"Sat Jan 19 2019 16:49:38 GMT-0700 (Mountain Standard Time)","process":{"pid":97424,"uid":502,"gid":20,"cwd":"/Users/pjeffryes/Documents/pete/basic-api-jwt","execPath":"/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","version":"v11.6.0","argv":["/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/mocha/bin/_mocha","test/**/*.js","./test/runner.test.js"],"memoryUsage":{"rss":116707328,"heapTotal":85790720,"heapUsed":40981472,"external":154774}},"os":{"loadavg":[1.2197265625,1.646484375,1.7392578125],"uptime":546146},"trace":[{"column":45,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/core/assertions.js","function":"ctx.(anonymous function).include","line":228,"method":"include","native":false},{"column":29,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js","function":"doAsserterAsyncAndAddThen","line":293,"method":null,"native":false},{"column":25,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js","function":null,"line":271,"method":null,"native":false},{"column":34,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/overwriteChainableMethod.js","function":"ctx.(anonymous function).chainableBehavior.method","line":51,"method":"method","native":false},{"column":49,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/addChainableMethod.js","function":"ctx.(anonymous function).assert","line":84,"method":"assert","native":false},{"column":33,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js","function":"chai.request.get.end","line":44,"method":"end","native":false},{"column":3,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":"Test.Request.callback","line":631,"method":"callback","native":false},{"column":18,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":null,"line":795,"method":null,"native":false},{"column":7,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js","function":null,"line":16,"method":null,"native":false},{"column":15,"file":"events.js","function":"IncomingMessage.emit","line":193,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"endReadableNT","line":1129,"method":null,"native":false},{"column":19,"file":"internal/process/next_tick.js","function":"process.internalTickCallback","line":72,"method":"internalTickCallback","native":false}]}
{"message":"{\"error\":\"err.status is not a function\",\"stack\":\"TypeError: err.status is not a function\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:92:13)\\n    at new Promise (<anonymous>)\\n    at Object.validateUserAndPassword (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:89:12)\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:61:12)\\n    at new Promise (<anonymous>)\\n    at Object.createUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:60:12)\\n    at registerUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:105:10)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/read.js:129:5\\n    at invokeCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:262:16)\\n    at done (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:251:7)\\n    at IncomingMessage.onEnd (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:307:7)\\n    at IncomingMessage.emit (events.js:188:13)\\n    at endReadableNT (_stream_readable.js:1129:12)\\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)\"}","level":"error"}
{"message":"{\"error\":\"Login failed.\",\"stack\":\"TypeError: Cannot read property 'password' of undefined\\n    at knex.where.first.then.user (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:123:41)\\n    at tryCatcher (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/util.js:16:23)\\n    at Promise._settlePromiseFromHandler (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:512:31)\\n    at Promise._settlePromise (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:569:18)\\n    at Promise._settlePromise0 (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:614:10)\\n    at Promise._settlePromises (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:694:18)\\n    at _drainQueueStep (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:138:12)\\n    at _drainQueue (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:131:9)\\n    at Async._drainQueues (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:147:5)\\n    at Immediate.Async.drainQueues [as _onImmediate] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:17:14)\\n    at processImmediate (timers.js:632:19)\",\"status\":401}","level":"error"}
{"message":"{\"error\":\"Please log in.\",\"stack\":\"Error: Please log in.\\n    at checkAuthentication (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:38:21)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at jsonParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/json.js:103:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at urlencodedParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/urlencoded.js:91:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at cors (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:188:7)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:224:17\\n    at originCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:214:15)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:219:13\\n    at optionsCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:199:9)\\n    at corsMiddleware (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:204:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at expressInit (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/init.js:33:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at query (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/query.js:49:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/application.js:173:10)\\n    at Server.app (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/express.js:38:9)\\n    at Server.emit (events.js:188:13)\\n    at parserOnIncoming (_http_server.js:676:12)\\n    at HTTPParser.parserOnHeadersComplete (_http_common.js:113:17)\",\"status\":401}","level":"error"}
{"error":{},"level":"error","message":"uncaughtException: obj.indexOf is not a function\nTypeError: obj.indexOf is not a function\n    at ctx.(anonymous function).include (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/core/assertions.js:228:45)\n    at doAsserterAsyncAndAddThen (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js:293:29)\n    at ctx.(anonymous function).<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js:271:25)\n    at ctx.(anonymous function).chainableBehavior.method (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/overwriteChainableMethod.js:51:34)\n    at ctx.(anonymous function).assert (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/addChainableMethod.js:84:49)\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:45:33)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","stack":"TypeError: obj.indexOf is not a function\n    at ctx.(anonymous function).include (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/core/assertions.js:228:45)\n    at doAsserterAsyncAndAddThen (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js:293:29)\n    at ctx.(anonymous function).<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js:271:25)\n    at ctx.(anonymous function).chainableBehavior.method (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/overwriteChainableMethod.js:51:34)\n    at ctx.(anonymous function).assert (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/addChainableMethod.js:84:49)\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:45:33)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","exception":true,"date":"Sat Jan 19 2019 16:50:23 GMT-0700 (Mountain Standard Time)","process":{"pid":97609,"uid":502,"gid":20,"cwd":"/Users/pjeffryes/Documents/pete/basic-api-jwt","execPath":"/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","version":"v11.6.0","argv":["/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/mocha/bin/_mocha","test/**/*.js","./test/runner.test.js"],"memoryUsage":{"rss":116396032,"heapTotal":85266432,"heapUsed":40945648,"external":154774}},"os":{"loadavg":[1.275390625,1.5888671875,1.71142578125],"uptime":546191},"trace":[{"column":45,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/core/assertions.js","function":"ctx.(anonymous function).include","line":228,"method":"include","native":false},{"column":29,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js","function":"doAsserterAsyncAndAddThen","line":293,"method":null,"native":false},{"column":25,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js","function":null,"line":271,"method":null,"native":false},{"column":34,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/overwriteChainableMethod.js","function":"ctx.(anonymous function).chainableBehavior.method","line":51,"method":"method","native":false},{"column":49,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/addChainableMethod.js","function":"ctx.(anonymous function).assert","line":84,"method":"assert","native":false},{"column":33,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js","function":"chai.request.get.end","line":45,"method":"end","native":false},{"column":3,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":"Test.Request.callback","line":631,"method":"callback","native":false},{"column":18,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":null,"line":795,"method":null,"native":false},{"column":7,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js","function":null,"line":16,"method":null,"native":false},{"column":15,"file":"events.js","function":"IncomingMessage.emit","line":193,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"endReadableNT","line":1129,"method":null,"native":false},{"column":19,"file":"internal/process/next_tick.js","function":"process.internalTickCallback","line":72,"method":"internalTickCallback","native":false}]}
{"message":"{\"error\":\"err.status is not a function\",\"stack\":\"TypeError: err.status is not a function\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:92:13)\\n    at new Promise (<anonymous>)\\n    at Object.validateUserAndPassword (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:89:12)\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:61:12)\\n    at new Promise (<anonymous>)\\n    at Object.createUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:60:12)\\n    at registerUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:105:10)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/read.js:129:5\\n    at invokeCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:262:16)\\n    at done (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:251:7)\\n    at IncomingMessage.onEnd (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:307:7)\\n    at IncomingMessage.emit (events.js:188:13)\\n    at endReadableNT (_stream_readable.js:1129:12)\\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)\"}","level":"error"}
{"message":"{\"error\":\"Login failed.\",\"stack\":\"TypeError: Cannot read property 'password' of undefined\\n    at knex.where.first.then.user (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:123:41)\\n    at tryCatcher (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/util.js:16:23)\\n    at Promise._settlePromiseFromHandler (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:512:31)\\n    at Promise._settlePromise (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:569:18)\\n    at Promise._settlePromise0 (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:614:10)\\n    at Promise._settlePromises (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:694:18)\\n    at _drainQueueStep (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:138:12)\\n    at _drainQueue (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:131:9)\\n    at Async._drainQueues (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:147:5)\\n    at Immediate.Async.drainQueues [as _onImmediate] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:17:14)\\n    at processImmediate (timers.js:632:19)\",\"status\":401}","level":"error"}
{"message":"{\"error\":\"Please log in.\",\"stack\":\"Error: Please log in.\\n    at checkAuthentication (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:38:21)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at jsonParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/json.js:103:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at urlencodedParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/urlencoded.js:91:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at cors (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:188:7)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:224:17\\n    at originCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:214:15)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:219:13\\n    at optionsCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:199:9)\\n    at corsMiddleware (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:204:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at expressInit (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/init.js:33:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at query (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/query.js:49:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/application.js:173:10)\\n    at Server.app (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/express.js:38:9)\\n    at Server.emit (events.js:188:13)\\n    at parserOnIncoming (_http_server.js:676:12)\\n    at HTTPParser.parserOnHeadersComplete (_http_common.js:113:17)\",\"status\":401}","level":"error"}
{"message":"{\"error\":\"err.status is not a function\",\"stack\":\"TypeError: err.status is not a function\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:92:13)\\n    at new Promise (<anonymous>)\\n    at Object.validateUserAndPassword (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:89:12)\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:61:12)\\n    at new Promise (<anonymous>)\\n    at Object.createUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:60:12)\\n    at registerUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:105:10)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/read.js:129:5\\n    at invokeCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:262:16)\\n    at done (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:251:7)\\n    at IncomingMessage.onEnd (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:307:7)\\n    at IncomingMessage.emit (events.js:188:13)\\n    at endReadableNT (_stream_readable.js:1129:12)\\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)\"}","level":"error"}
{"message":"{\"error\":\"Login failed.\",\"stack\":\"TypeError: Cannot read property 'password' of undefined\\n    at knex.where.first.then.user (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:123:41)\\n    at tryCatcher (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/util.js:16:23)\\n    at Promise._settlePromiseFromHandler (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:512:31)\\n    at Promise._settlePromise (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:569:18)\\n    at Promise._settlePromise0 (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:614:10)\\n    at Promise._settlePromises (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:694:18)\\n    at _drainQueueStep (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:138:12)\\n    at _drainQueue (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:131:9)\\n    at Async._drainQueues (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:147:5)\\n    at Immediate.Async.drainQueues [as _onImmediate] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:17:14)\\n    at processImmediate (timers.js:632:19)\",\"status\":401}","level":"error"}
{"message":"{\"error\":\"Please log in.\",\"stack\":\"Error: Please log in.\\n    at checkAuthentication (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:38:21)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at jsonParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/json.js:103:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at urlencodedParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/urlencoded.js:91:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at cors (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:188:7)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:224:17\\n    at originCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:214:15)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:219:13\\n    at optionsCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:199:9)\\n    at corsMiddleware (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:204:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at expressInit (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/init.js:33:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at query (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/query.js:49:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/application.js:173:10)\\n    at Server.app (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/express.js:38:9)\\n    at Server.emit (events.js:188:13)\\n    at parserOnIncoming (_http_server.js:676:12)\\n    at HTTPParser.parserOnHeadersComplete (_http_common.js:113:17)\",\"status\":401}","level":"error"}
{"message":"{\"error\":\"err.status is not a function\",\"stack\":\"TypeError: err.status is not a function\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:92:13)\\n    at new Promise (<anonymous>)\\n    at Object.validateUserAndPassword (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:89:12)\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:61:12)\\n    at new Promise (<anonymous>)\\n    at Object.createUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:60:12)\\n    at registerUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:105:10)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/read.js:129:5\\n    at invokeCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:262:16)\\n    at done (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:251:7)\\n    at IncomingMessage.onEnd (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:307:7)\\n    at IncomingMessage.emit (events.js:188:13)\\n    at endReadableNT (_stream_readable.js:1129:12)\\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)\"}","level":"error"}
{"message":"{\"error\":\"Login failed.\",\"stack\":\"TypeError: Cannot read property 'password' of undefined\\n    at knex.where.first.then.user (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:123:41)\\n    at tryCatcher (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/util.js:16:23)\\n    at Promise._settlePromiseFromHandler (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:512:31)\\n    at Promise._settlePromise (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:569:18)\\n    at Promise._settlePromise0 (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:614:10)\\n    at Promise._settlePromises (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:694:18)\\n    at _drainQueueStep (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:138:12)\\n    at _drainQueue (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:131:9)\\n    at Async._drainQueues (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:147:5)\\n    at Immediate.Async.drainQueues [as _onImmediate] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:17:14)\\n    at processImmediate (timers.js:632:19)\",\"status\":401}","level":"error"}
{"message":"{\"error\":\"Please log in.\",\"stack\":\"Error: Please log in.\\n    at checkAuthentication (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:38:21)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at jsonParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/json.js:103:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at urlencodedParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/urlencoded.js:91:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at cors (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:188:7)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:224:17\\n    at originCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:214:15)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:219:13\\n    at optionsCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:199:9)\\n    at corsMiddleware (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:204:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at expressInit (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/init.js:33:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at query (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/query.js:49:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/application.js:173:10)\\n    at Server.app (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/express.js:38:9)\\n    at Server.emit (events.js:188:13)\\n    at parserOnIncoming (_http_server.js:676:12)\\n    at HTTPParser.parserOnHeadersComplete (_http_common.js:113:17)\",\"status\":401}","level":"error"}
{"error":{},"level":"error","message":"uncaughtException: expect(...).to.be is not a function\nTypeError: expect(...).to.be is not a function\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:43:26)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","stack":"TypeError: expect(...).to.be is not a function\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:43:26)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","exception":true,"date":"Sat Jan 19 2019 16:52:10 GMT-0700 (Mountain Standard Time)","process":{"pid":97822,"uid":502,"gid":20,"cwd":"/Users/pjeffryes/Documents/pete/basic-api-jwt","execPath":"/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","version":"v11.6.0","argv":["/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/mocha/bin/_mocha","test/**/*.js","./test/runner.test.js"],"memoryUsage":{"rss":117018624,"heapTotal":85790720,"heapUsed":40861992,"external":154770}},"os":{"loadavg":[2.23779296875,1.8203125,1.78564453125],"uptime":546298},"trace":[{"column":26,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js","function":"chai.request.get.end","line":43,"method":"end","native":false},{"column":3,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":"Test.Request.callback","line":631,"method":"callback","native":false},{"column":18,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":null,"line":795,"method":null,"native":false},{"column":7,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js","function":null,"line":16,"method":null,"native":false},{"column":15,"file":"events.js","function":"IncomingMessage.emit","line":193,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"endReadableNT","line":1129,"method":null,"native":false},{"column":19,"file":"internal/process/next_tick.js","function":"process.internalTickCallback","line":72,"method":"internalTickCallback","native":false}]}
{"message":"{\"error\":\"err.status is not a function\",\"stack\":\"TypeError: err.status is not a function\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:92:13)\\n    at new Promise (<anonymous>)\\n    at Object.validateUserAndPassword (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:89:12)\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:61:12)\\n    at new Promise (<anonymous>)\\n    at Object.createUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:60:12)\\n    at registerUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:105:10)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/read.js:129:5\\n    at invokeCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:262:16)\\n    at done (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:251:7)\\n    at IncomingMessage.onEnd (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:307:7)\\n    at IncomingMessage.emit (events.js:188:13)\\n    at endReadableNT (_stream_readable.js:1129:12)\\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)\"}","level":"error"}
{"message":"{\"error\":\"Login failed.\",\"stack\":\"TypeError: Cannot read property 'password' of undefined\\n    at knex.where.first.then.user (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:123:41)\\n    at tryCatcher (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/util.js:16:23)\\n    at Promise._settlePromiseFromHandler (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:512:31)\\n    at Promise._settlePromise (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:569:18)\\n    at Promise._settlePromise0 (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:614:10)\\n    at Promise._settlePromises (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:694:18)\\n    at _drainQueueStep (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:138:12)\\n    at _drainQueue (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:131:9)\\n    at Async._drainQueues (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:147:5)\\n    at Immediate.Async.drainQueues [as _onImmediate] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:17:14)\\n    at processImmediate (timers.js:632:19)\",\"status\":401}","level":"error"}
{"message":"{\"error\":\"Please log in.\",\"stack\":\"Error: Please log in.\\n    at checkAuthentication (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:38:21)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at jsonParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/json.js:103:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at urlencodedParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/urlencoded.js:91:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at cors (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:188:7)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:224:17\\n    at originCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:214:15)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:219:13\\n    at optionsCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:199:9)\\n    at corsMiddleware (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:204:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at expressInit (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/init.js:33:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at query (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/query.js:49:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/application.js:173:10)\\n    at Server.app (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/express.js:38:9)\\n    at Server.emit (events.js:188:13)\\n    at parserOnIncoming (_http_server.js:676:12)\\n    at HTTPParser.parserOnHeadersComplete (_http_common.js:113:17)\",\"status\":401}","level":"error"}
{"error":{},"level":"error","message":"uncaughtException: expect(...).toBe is not a function\nTypeError: expect(...).toBe is not a function\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:43:23)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","stack":"TypeError: expect(...).toBe is not a function\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:43:23)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","exception":true,"date":"Sat Jan 19 2019 16:52:33 GMT-0700 (Mountain Standard Time)","process":{"pid":97894,"uid":502,"gid":20,"cwd":"/Users/pjeffryes/Documents/pete/basic-api-jwt","execPath":"/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","version":"v11.6.0","argv":["/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/mocha/bin/_mocha","test/**/*.js","./test/runner.test.js"],"memoryUsage":{"rss":115773440,"heapTotal":84742144,"heapUsed":40797752,"external":154132}},"os":{"loadavg":[2.22900390625,1.85009765625,1.79638671875],"uptime":546321},"trace":[{"column":23,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js","function":"chai.request.get.end","line":43,"method":"end","native":false},{"column":3,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":"Test.Request.callback","line":631,"method":"callback","native":false},{"column":18,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":null,"line":795,"method":null,"native":false},{"column":7,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js","function":null,"line":16,"method":null,"native":false},{"column":15,"file":"events.js","function":"IncomingMessage.emit","line":193,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"endReadableNT","line":1129,"method":null,"native":false},{"column":19,"file":"internal/process/next_tick.js","function":"process.internalTickCallback","line":72,"method":"internalTickCallback","native":false}]}
{"message":"{\"error\":\"err.status is not a function\",\"stack\":\"TypeError: err.status is not a function\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:92:13)\\n    at new Promise (<anonymous>)\\n    at Object.validateUserAndPassword (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:89:12)\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:61:12)\\n    at new Promise (<anonymous>)\\n    at Object.createUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:60:12)\\n    at registerUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:105:10)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/read.js:129:5\\n    at invokeCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:262:16)\\n    at done (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:251:7)\\n    at IncomingMessage.onEnd (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:307:7)\\n    at IncomingMessage.emit (events.js:188:13)\\n    at endReadableNT (_stream_readable.js:1129:12)\\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)\"}","level":"error"}
{"message":"{\"error\":\"Login failed.\",\"stack\":\"TypeError: Cannot read property 'password' of undefined\\n    at knex.where.first.then.user (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:123:41)\\n    at tryCatcher (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/util.js:16:23)\\n    at Promise._settlePromiseFromHandler (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:512:31)\\n    at Promise._settlePromise (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:569:18)\\n    at Promise._settlePromise0 (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:614:10)\\n    at Promise._settlePromises (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:694:18)\\n    at _drainQueueStep (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:138:12)\\n    at _drainQueue (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:131:9)\\n    at Async._drainQueues (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:147:5)\\n    at Immediate.Async.drainQueues [as _onImmediate] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:17:14)\\n    at processImmediate (timers.js:632:19)\",\"status\":401}","level":"error"}
{"message":"{\"error\":\"Please log in.\",\"stack\":\"Error: Please log in.\\n    at checkAuthentication (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:38:21)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at jsonParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/json.js:103:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at urlencodedParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/urlencoded.js:91:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at cors (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:188:7)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:224:17\\n    at originCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:214:15)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:219:13\\n    at optionsCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:199:9)\\n    at corsMiddleware (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:204:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at expressInit (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/init.js:33:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at query (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/query.js:49:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/application.js:173:10)\\n    at Server.app (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/express.js:38:9)\\n    at Server.emit (events.js:188:13)\\n    at parserOnIncoming (_http_server.js:676:12)\\n    at HTTPParser.parserOnHeadersComplete (_http_common.js:113:17)\",\"status\":401}","level":"error"}
{"error":{"name":"AssertionError","message":"expected [Error: Unauthorized] to be null","showDiff":false,"actual":{"original":null,"response":{"req":{"method":"get","url":"http://127.0.0.1:49897/auth/current_user","headers":{"user-agent":"node-superagent/2.3.0"}},"header":{"x-powered-by":"Express","access-control-allow-origin":"*","content-type":"application/json; charset=utf-8","content-length":"53","etag":"W/\"35-jB64ALau3OR44Ueyb9nOUw\"","date":"Sat, 19 Jan 2019 23:53:05 GMT","connection":"close"},"status":401,"text":"{\"error\":{\"message\":\"Please log in.\",\"name\":\"Error\"}}"},"status":401},"stack":"AssertionError: expected [Error: Unauthorized] to be null\n    at doAsserterAsyncAndAddThen (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js:293:29)\n    at Assertion.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js:283:21)\n    at Assertion.get (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/overwriteProperty.js:50:37)\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:43:28)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)"},"level":"error","message":"uncaughtException: expected [Error: Unauthorized] to be null\nAssertionError: expected [Error: Unauthorized] to be null\n    at doAsserterAsyncAndAddThen (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js:293:29)\n    at Assertion.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js:283:21)\n    at Assertion.get (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/overwriteProperty.js:50:37)\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:43:28)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","stack":"AssertionError: expected [Error: Unauthorized] to be null\n    at doAsserterAsyncAndAddThen (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js:293:29)\n    at Assertion.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js:283:21)\n    at Assertion.get (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/overwriteProperty.js:50:37)\n    at chai.request.get.end (/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js:43:28)\n    at Test.Request.callback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:631:3)\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js:795:18\n    at IncomingMessage.<anonymous> (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js:16:7)\n    at IncomingMessage.emit (events.js:193:15)\n    at endReadableNT (_stream_readable.js:1129:12)\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)","exception":true,"date":"Sat Jan 19 2019 16:53:05 GMT-0700 (Mountain Standard Time)","process":{"pid":97963,"uid":502,"gid":20,"cwd":"/Users/pjeffryes/Documents/pete/basic-api-jwt","execPath":"/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","version":"v11.6.0","argv":["/Users/pjeffryes/.nvm/versions/node/v11.6.0/bin/node","/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/mocha/bin/_mocha","test/**/*.js","./test/runner.test.js"],"memoryUsage":{"rss":116293632,"heapTotal":85266432,"heapUsed":40897904,"external":154774}},"os":{"loadavg":[2.14697265625,1.86328125,1.80224609375],"uptime":546353},"trace":[{"column":29,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js","function":"doAsserterAsyncAndAddThen","line":293,"method":null,"native":false},{"column":21,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai-as-promised/lib/chai-as-promised.js","function":null,"line":283,"method":null,"native":false},{"column":37,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/chai/lib/chai/utils/overwriteProperty.js","function":"Assertion.get","line":50,"method":"get","native":false},{"column":28,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/test/controllers/auth.js","function":"chai.request.get.end","line":43,"method":"end","native":false},{"column":3,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":"Test.Request.callback","line":631,"method":"callback","native":false},{"column":18,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/index.js","function":null,"line":795,"method":null,"native":false},{"column":7,"file":"/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/superagent/lib/node/parsers/json.js","function":null,"line":16,"method":null,"native":false},{"column":15,"file":"events.js","function":"IncomingMessage.emit","line":193,"method":"emit","native":false},{"column":12,"file":"_stream_readable.js","function":"endReadableNT","line":1129,"method":null,"native":false},{"column":19,"file":"internal/process/next_tick.js","function":"process.internalTickCallback","line":72,"method":"internalTickCallback","native":false}]}
{"message":"{\"error\":\"err.status is not a function\",\"stack\":\"TypeError: err.status is not a function\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:92:13)\\n    at new Promise (<anonymous>)\\n    at Object.validateUserAndPassword (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:89:12)\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:61:12)\\n    at new Promise (<anonymous>)\\n    at Object.createUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:60:12)\\n    at registerUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:105:10)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/read.js:129:5\\n    at invokeCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:262:16)\\n    at done (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:251:7)\\n    at IncomingMessage.onEnd (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:307:7)\\n    at IncomingMessage.emit (events.js:188:13)\\n    at endReadableNT (_stream_readable.js:1129:12)\\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)\"}","level":"error"}
{"message":"{\"error\":\"Login failed.\",\"stack\":\"TypeError: Cannot read property 'password' of undefined\\n    at knex.where.first.then.user (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:123:41)\\n    at tryCatcher (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/util.js:16:23)\\n    at Promise._settlePromiseFromHandler (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:512:31)\\n    at Promise._settlePromise (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:569:18)\\n    at Promise._settlePromise0 (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:614:10)\\n    at Promise._settlePromises (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:694:18)\\n    at _drainQueueStep (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:138:12)\\n    at _drainQueue (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:131:9)\\n    at Async._drainQueues (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:147:5)\\n    at Immediate.Async.drainQueues [as _onImmediate] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:17:14)\\n    at processImmediate (timers.js:632:19)\",\"status\":401}","level":"error"}
{"message":"{\"error\":\"Please log in.\",\"stack\":\"Error: Please log in.\\n    at checkAuthentication (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:38:21)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at jsonParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/json.js:103:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at urlencodedParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/urlencoded.js:91:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at cors (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:188:7)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:224:17\\n    at originCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:214:15)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:219:13\\n    at optionsCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:199:9)\\n    at corsMiddleware (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:204:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at expressInit (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/init.js:33:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at query (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/query.js:49:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/application.js:173:10)\\n    at Server.app (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/express.js:38:9)\\n    at Server.emit (events.js:188:13)\\n    at parserOnIncoming (_http_server.js:676:12)\\n    at HTTPParser.parserOnHeadersComplete (_http_common.js:113:17)\",\"status\":401}","level":"error"}
{"message":"{\"error\":\"err.status is not a function\",\"stack\":\"TypeError: err.status is not a function\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:92:13)\\n    at new Promise (<anonymous>)\\n    at Object.validateUserAndPassword (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:89:12)\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:61:12)\\n    at new Promise (<anonymous>)\\n    at Object.createUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:60:12)\\n    at registerUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:105:10)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/read.js:129:5\\n    at invokeCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:262:16)\\n    at done (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:251:7)\\n    at IncomingMessage.onEnd (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:307:7)\\n    at IncomingMessage.emit (events.js:188:13)\\n    at endReadableNT (_stream_readable.js:1129:12)\\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)\"}","level":"error"}
{"message":"{\"error\":\"Login failed.\",\"stack\":\"TypeError: Cannot read property 'password' of undefined\\n    at knex.where.first.then.user (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:123:41)\\n    at tryCatcher (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/util.js:16:23)\\n    at Promise._settlePromiseFromHandler (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:512:31)\\n    at Promise._settlePromise (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:569:18)\\n    at Promise._settlePromise0 (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:614:10)\\n    at Promise._settlePromises (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:694:18)\\n    at _drainQueueStep (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:138:12)\\n    at _drainQueue (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:131:9)\\n    at Async._drainQueues (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:147:5)\\n    at Immediate.Async.drainQueues [as _onImmediate] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:17:14)\\n    at processImmediate (timers.js:632:19)\",\"status\":401}","level":"error"}
{"message":"{\"error\":\"Please log in.\",\"stack\":\"Error: Please log in.\\n    at checkAuthentication (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:38:21)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at jsonParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/json.js:103:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at urlencodedParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/urlencoded.js:91:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at cors (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:188:7)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:224:17\\n    at originCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:214:15)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:219:13\\n    at optionsCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:199:9)\\n    at corsMiddleware (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:204:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at expressInit (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/init.js:33:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at query (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/query.js:49:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/application.js:173:10)\\n    at Server.app (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/express.js:38:9)\\n    at Server.emit (events.js:188:13)\\n    at parserOnIncoming (_http_server.js:676:12)\\n    at HTTPParser.parserOnHeadersComplete (_http_common.js:113:17)\",\"status\":401}","level":"error"}
{"message":"{\"error\":\"err.status is not a function\",\"stack\":\"TypeError: err.status is not a function\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:92:13)\\n    at new Promise (<anonymous>)\\n    at Object.validateUserAndPassword (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:89:12)\\n    at Promise (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:61:12)\\n    at new Promise (<anonymous>)\\n    at Object.createUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:60:12)\\n    at registerUser (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:105:10)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/read.js:129:5\\n    at invokeCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:262:16)\\n    at done (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:251:7)\\n    at IncomingMessage.onEnd (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/raw-body/index.js:307:7)\\n    at IncomingMessage.emit (events.js:188:13)\\n    at endReadableNT (_stream_readable.js:1129:12)\\n    at process.internalTickCallback (internal/process/next_tick.js:72:19)\"}","level":"error"}
{"message":"{\"error\":\"Login failed.\",\"stack\":\"TypeError: Cannot read property 'password' of undefined\\n    at knex.where.first.then.user (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:123:41)\\n    at tryCatcher (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/util.js:16:23)\\n    at Promise._settlePromiseFromHandler (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:512:31)\\n    at Promise._settlePromise (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:569:18)\\n    at Promise._settlePromise0 (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:614:10)\\n    at Promise._settlePromises (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/promise.js:694:18)\\n    at _drainQueueStep (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:138:12)\\n    at _drainQueue (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:131:9)\\n    at Async._drainQueues (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:147:5)\\n    at Immediate.Async.drainQueues [as _onImmediate] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/bluebird/js/release/async.js:17:14)\\n    at processImmediate (timers.js:632:19)\",\"status\":401}","level":"error"}
{"message":"{\"error\":\"Please log in.\",\"stack\":\"Error: Please log in.\\n    at checkAuthentication (/Users/pjeffryes/Documents/pete/basic-api-jwt/src/server/controllers/auth.js:38:21)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:131:13)\\n    at Route.dispatch (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/route.js:112:3)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:277:22\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at router (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:46:12)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at jsonParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/json.js:103:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at urlencodedParser (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/body-parser/lib/types/urlencoded.js:91:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at cors (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:188:7)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:224:17\\n    at originCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:214:15)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:219:13\\n    at optionsCallback (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:199:9)\\n    at corsMiddleware (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/cors/lib/index.js:204:7)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at expressInit (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/init.js:33:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at query (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/middleware/query.js:49:5)\\n    at Layer.handle [as handle_request] (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/layer.js:95:5)\\n    at trim_prefix (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:312:13)\\n    at /Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:280:7\\n    at Function.process_params (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:330:12)\\n    at next (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:271:10)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/router/index.js:176:3)\\n    at Function.handle (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/application.js:173:10)\\n    at Server.app (/Users/pjeffryes/Documents/pete/basic-api-jwt/node_modules/express/lib/express.js:38:9)\\n    at Server.emit (events.js:188:13)\\n    at parserOnIncoming (_http_server.js:676:12)\\n    at HTTPParser.parserOnHeadersComplete (_http_common.js:113:17)\",\"status\":401}","level":"error"}
